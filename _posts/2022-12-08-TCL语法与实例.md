---
layout: post
title:  "Tcl语法与实例"
date:   2022-12-08 20:27:10 +0700
tags:
  - Tcl
---

-------


## 1 前言

&#160; &#160; &#160; &#160; 搞IC的哪能不会Tcl，虽然我也是才学😅。


----

## 2 Tcl基础

### 2.1 简介

&#160; &#160; &#160; &#160; Tcl全称Tool command language，是一种解释性语言，不像其他高级语言需要编译，而像shell语言一样，直接对每条语言顺次解释执行。对它而言，要处理的数据只有一种——字符串，它将变量值以字符串的形式进行存储，不关心它的实际使用类型。

&#160; &#160; &#160; &#160; Tcl的执行是交互式的，Tcl提供了交互式命令界面：tclsh和wish。tclsh只支持Tcl命令，wish支持Tcl和Tk命令。通过交互界面，我们就可以像执行shell命令一样，逐条命令执行，并即时得到执行结果。

### 2.2 命令格式

&#160; &#160; &#160; &#160; 一条Tcl基本语法为：

```tcl
#命令 参数1 参数2 ...
command arg1 arg2 ... 
```

&#160; &#160; &#160; &#160; 其中command为Tcl内建命令或者Tcl过程，各条命令可以单独一行，**也可以在同一行，在同一行时，要用“;”来分割：**

```tcl
command1 arg1; command2 arg2; #comment
```


&#160; &#160; &#160; &#160; 字符串中如果有空格，要用“”或者{}括起来，因为Tcl语句中各命令参数是以空格来分割的，否则，字符串中的单词会被认为多余的参数而出错。

### 2.3 可执行脚本文件

&#160; &#160; &#160; &#160; 编写完一个脚本文件吼，可用source来执行该脚本，但需要先启动tclsh。要编写可执行脚本文件，需要在脚本中加入指定解释器，类似其他脚本比如Perl：
```tcl
#!/usr/bin/tclsh
```


----

## 3 输出、复制与替换

### 3.1 puts

&#160; &#160; &#160; &#160; Tcl的输出命令是“puts”，将字符串输出到标准输出channelld：

```tcl
puts hello;                   # 字符串不需要引号
puts "hello world";           # 有空格需要加引号或花括号
puts -nonewline "hello world";# 此选项不输出回车换行
```

&#160; &#160; &#160; &#160; 需要注意的是，**双引号和花括号是有差别的，在处理“替换操作时”，前者允许替换发生，后者可能会阻止替换。**

### 3.2 set&unset

&#160; &#160; &#160; &#160; set为变量定义和赋值命令，不需要指定变量值的类型，因为**变量值的类型只有一种：字符串。**

&#160; &#160; &#160; &#160; unset命令与set命令作用相反，它取消变量定义，并释放变量所占的内存空间。

&#160; &#160; &#160; &#160; 通过“$”符，可以引用变量的值。

&#160; &#160; &#160; &#160; set命令也可以只跟变量而无变量值，若变量已经定义，则返回变量值，效果和puts类似。如果变量不存在，则返回错误信息。




----
&#160; &#160; &#160; &#160; 告辞。

